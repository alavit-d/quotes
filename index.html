<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="style.css" type="text/css">
    <link rel="icon" type="image/png" href="electric-light-bulb.png" />
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/seedrandom/2.4.0/seedrandom.min.js"></script>
    <script src="zeroclipboard/dist/ZeroClipboard.js"></script>
</head>
<body>
    <div class="container-fluid container">
        <h1>Inspirationnal Quote Generator</h1>
        <h4>Generate fake quotes randomly</h4>
        <div class="quote-cont">
            <div class="filter">
                <div class="quote"></div>
                <div class="author"></div>
            </div>
        </div>
        <button class="btn btn-default" onclick="genQuote()">Enlighten Me!</button>
        <button class="btn btn-default" id="copy-button" data-clipboard-text="" title="Click to copy me.">Save URL</button>
        <footer>2015 - LolVStein/alavit-d - sschvart</footer>
    </div>
</body>
    <script src="dictionary.js"></script>
    <script>
        Math.seedrandom()
        function capitalize(str) {
            //var index = -1;
            str = str.charAt(0).toUpperCase() + str.slice(1);
            str = str.replace(/\. [a-z]/g, function myFun(x) { return x.toUpperCase();});
            return str;
        }
        var pics = ['amazing-736881_640.jpg', 'birds-707348_640.jpg',  'groynes-339252_640.jpg', 'run.jpg', 'sunset-658583_640.jpg', 'bird-383245_640.jpg', 'bricks-459299_640.jpg', 'langhe-390108_1280.jpg', 'sunrise-77677_640.jpg', 'sunset-675847_1280.jpg'];
        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }
        function rd(n) {
            return (n[Math.floor(Math.random() * n.length)]);
        }
        var words = [mind, self, vast, human];
        function genTone() {
            var tone = Math.floor(Math.random() * words.length);
            return (rd(words[tone]) + ' ' + rd(verbs) + ' ' + rd(words[tone]));
        }
        function genWord() {
            return rd(rd(words));
        }
        function genAfter() {
            return (Math.floor(Math.random() * 2) == 0 ? '' : (' ' + rd(after)));
        }
        function shortQuote() {
            var str = rd(rd(subject));
            if (subj1.indexOf(str) != -1)
                return (str + ' ' + rd(verbs1) + ' ' + rd(cplt) + genAfter());
            else if (subj2.indexOf(str) != -1)
                return (str + ' ' + rd(verbs2) + ' ' + rd(cplt) + genAfter());
            else
                return (str + ' ' + rd(verbs3) + ' ' + rd(cplt) + genAfter());
        }
        function longQuote() {
            return (shortQuote() + rd(conj) + ' ' + shortQuote());
        }
        var gen = [shortQuote, longQuote];
        function genQuote() {
            $(".quote-cont").css('background-image', 'url("pics/' + rd(pics) + '")');
            $(".quote").text(capitalize(rd(gen)() + '.'));
            $(".author").text(rd(famous));
            $("#copy-button").attr('data-clipboard-text', window.location.hostname  + '/quotes/?quote=' + encodeURIComponent($(".quote").text()) + '&author='  + encodeURIComponent($(".author").text()) + '&img=' + encodeURIComponent($(".quote-cont").css('background-image')));
        }
        $(document).ready(function() {
            var client = new ZeroClipboard( document.getElementById("copy-button") );
            client.on( "ready", function( readyEvent ) {
            // alert( "ZeroClipboard SWF is ready!" );
                client.on( "aftercopy", function( event ) {
                // `this` === `client`
                // `event.target` === the element that was clicked
                //event.target.style.display = "none";
                } )
            } );
            var quote = getParameterByName('quote');
            var author = getParameterByName('author');
            var img = getParameterByName('img');
            if (quote && author && img) {
                $(".quote-cont").css('background-image', img);
                $(".quote").text(quote);
                $(".author").text(author)
            }
            else
                genQuote();
        });
</script>
</html>
